- body_class 'blue-grey lighten-5 has-aside'

.fixed-action-btn
  - unless @lobby_user.nil?
    = link_to lobby_user_path(@lobby_user), method: :delete,  class: 'btn-floating btn-large waves-effect waves-light red tooltipped', data: { tooltip: 'Leave Lobby', position: 'left' } do
      %i.material-icons close

.container
  %h3.header= @lobby.name
  %p.caption Insert game here.

%aside
  .row.no-margin
    %ul.tabs.tabs-border
      %li.tab.col.s4= link_to material_icon('chat'), '#chat'
      %li.tab.col.s4= link_to material_icon('supervisor_account'), '#users'
      %li.tab.col.s4= link_to material_icon('settings'), '#settings'

  #chat.scrollable
    %ul.collection.with-header.no-border.no-margin
      %li.collection-header
        %h5.header= @lobby.name

  #users.scrollable
    - @lobby.lobby_users.each do |gl_user|
      .user{data: { user_id: gl_user.guid }}
        .chip
          = image_tag gl_user.avatar_url, class: 'img-responsive circle'
          %span{class: (gl_user.admin? ? 'teal-text' : (gl_user.moderator? ? 'blue-text' : '')) }= gl_user.name

%script#lobby-chat-template{type: 'text/html'}
  %li.collection-item.avatar
    %img{src: '${lobby_user.avatar_url}', class: 'circle', alt: "${lobby_user.name}"}
    %span.title ${lobby_user.name}
    %p ${message}

:javascript
  Lobby.subscribe("#{@lobby.token}", "#{@lobby_user.guid}")
